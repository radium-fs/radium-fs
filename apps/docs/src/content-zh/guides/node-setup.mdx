import { Callout, InstallBlock } from '../../components/mdx';

# Node.js 配置

本指南演示如何在 Node.js 项目中使用 `@radium-fs/node` 适配器接入 radium-fs。

## 前置要求

- **Node.js >= 22**：用于内置 `fs.glob` 支持。

## 安装

<InstallBlock packages="@radium-fs/core @radium-fs/node" />

## 基础用法

```typescript
import { createStore, defineKind } from '@radium-fs/core';
import { nodeAdapter } from '@radium-fs/node';

const greeter = defineKind<{ name: string }>({
  kind: 'greeter',
  async onInit({ input, space }) {
    await space.writeFile('hello.txt', `Hello, ${input.name}!`);
    return { '.': '.' };
  },
});

const store = createStore({
  root: '/path/to/your/project',
  adapter: nodeAdapter(),
});

const space = await store.ensure(greeter, { name: 'World' });
console.log(space.path); // /path/to/your/project/.radium-fs-data/greeter/xx/...
```

<Callout type="note">
`@radium-fs/node` 仅支持 **ESM**。请在 `package.json` 中设置 `"type": "module"`，或使用 `.mjs` 扩展名。
</Callout>

<Callout type="tip">
Node 适配器使用原生 `node:crypto` 做哈希、`node:fs` 做文件操作，无需 polyfill，性能完整释放。
</Callout>

## 下一步

继续阅读 [内存适配器](/zh/docs/guides/memory-adapter)，用于测试或浏览器环境。
